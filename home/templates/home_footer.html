{% load static %}
<style>
    /* Fix: Make newsletter input text visible */
    .f-search input[type="email"] {
        color: white;  /* Ensures text is visible */
        
    }

    /* Fix: Style send button */
    .f-search button {
        background: none;
        border: none;
        cursor: pointer;
    } 
</style>
<section class="req-quote">
    <div class="container">
      <h2 class="title">
        Request a Quote
      </h2>
      <div class="flex-area">
        <p>Looking for tailored solutions to meet your specific needs? Contact us for a personalized quote.</p>
        <a href="
          " class="box-btn" data-bs-toggle="modal" data-bs-target="#exampleModalquote">Request a Quote</a>
      </div>
    </div>
  </section>


<!-- quote modal -->
<div class="modal fade" id="exampleModalquote" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">

    <div class="modal-body position-relative">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        <h2 class="title">
        Become a Partner
        </h2>
        <p>Submit your inquiry and let us assist you.</p>
        <form id="quoteRequestForm" method="POST">
            {% csrf_token %}
            <div class="input-area-contact">
                <div class="inp-grp">
                    <input type="text" name="full_name" id="full_name" placeholder="Your Full Name" required>
                </div>
                <div class="inp-grp">
                    <input type="email" name="email" id="email" placeholder="Your Email" required>
                </div>
                <div class="inp-grp">
                    <input type="tel" name="phone" id="phone" placeholder="Your Phone" required>
                </div>
                <div class="inp-grp">
                    <textarea name="message" id="message" placeholder="Your Message" rows="3" required></textarea>
                </div>
            </div>
            <button class="buy-now d-inline" type="submit">
                <span>Submit</span>
            </button>
            <a href="#" class="box-btn" data-bs-dismiss="modal">Cancel</a>
        </form>        
    </div>
    </div>
</div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-3">
                <a href="{% url 'home-page' %}">
                    <div class="f-logo">
                        <img src="{% static 'home_assets/media/logo.svg' %}" alt="">
                    </div>
                </a>
            </div>            
            <div class="col">
                <h3 class="f-link">Products</h3>
                <ul class="flinks">
                    <li><a href="{% url 'user_account-category_view' 1 %}">Lanline</a></li>
                    <li><a href="{% url 'user_account-category_view' 2 %}">Cabline</a></li>
                    <li><a href="{% url 'user_account-category_view' 4 %}">Actline</a></li>
                    <li><a href="{% url 'user_account-category_view' 3 %}">Powline</a></li>
                    <li><a href="{% url 'user_account-category_view' 5 %}">Secline</a></li>
                </ul>
            </div>
            <div class="col">
                <h3 class="f-link">Quick Links</h3>
                <ul class="flinks">
                    <li><a href="{% url 'home-page' %}">Home</a></li>
                    <li><a href="{% url 'home-about' %}">About Us</a></li>
                    <li><a href="{% url 'home-resources' %}">Resources</a></li>
                    <li><a href="{% url 'home-news' %}">News</a></li>
                </ul>
            </div>
            <div class="col">
                <h3 class="f-link">Company</h3>
                <ul class="flinks">
                    <li><a href="{% url 'home-contact' %}">Contact Us</a></li>
                    <li><a href="{% url 'home-careers' %}">Careers</a></li>
                    <li><a href="{% url 'home-support' %}">Support</a></li>
                    <li><a href="{% url 'home-partners' %}">Partners</a></li>
                </ul>
            </div>
            <div class="col-4">
                <h3 class="f-link">Stay Connected</h3>
                <ul class="flinks">
                    <li><a href="#">Subscribe to our newsletter for updates</a></li>
                    <li>
                        <form id="newsletterForm" method="POST">
                            {% csrf_token %}
                            <div class="f-search">
                                <input type="email" name="email" id="newsletter_email" placeholder="Email address" required>
                                <button type="submit" class="send">
                                    <img src="{% static 'home_assets/media/send.png' %}" alt="">
                                </button>
                            </div>
                        </form>
                    </li>
                    <li>
                        <ul class="soci">
                            <li><a href="" target="_blank"><img src="{% static 'home_assets/media/Instagram (1).png' %}" alt=""></a></li>
                            <li><a href="" target="_blank"><img src="{% static 'home_assets/media/Facebook.png' %}" alt=""></a></li>
                            <li><a href="" target="_blank"><img src="{% static 'home_assets/media/linkedin.png' %}" alt=""></a></li>
                            <li><a href="" target="_blank"><img src="{% static 'home_assets/media/Instagram.png' %}" alt=""></a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            
        </div>
        <div class="f-bottom">
            <div>
                <a href="{% url 'home-privacy' %}">Privacy</a>
                <span> | </span>
                <a href="{% url 'home-terms' %}">Terms of Use</a>
                <span> | </span>
                <a href="{% url 'account-login-page' %}">management(official)</a>
            </div>
            <div>
                <p>Â© 2024 Hubnetix Corporation. All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>

{% block extra_js %}
<script>
    $(document).ready(function() {
        $('#newsletterForm').on('submit', function(e) {
            e.preventDefault();
            
            // Show loading state
            Swal.fire({
                title: 'Subscribing...',
                html: 'Please wait a moment',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            var formData = new FormData(this);
            
            $.ajax({
                url: '{% url "subscribe_newsletter" %}',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    if(response.status === 'success') {
                        Swal.fire({
                            icon: 'success',
                            title: 'Subscribed!',
                            text: response.message,
                            confirmButtonColor: '#c53847',
                            timer: 3000,
                            timerProgressBar: true
                        }).then(() => {
                            $('#newsletterForm')[0].reset();
                        });
                    }
                },
                error: function(xhr) {
                    if(xhr.responseJSON && xhr.responseJSON.errors) {
                        var errors = xhr.responseJSON.errors;
                        var errorMessage = Object.values(errors).flat().join('\n');
                        
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: errorMessage,
                            confirmButtonColor: '#c53847'
                        });
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'An error occurred. Please try again.',
                            confirmButtonColor: '#c53847'
                        });
                    }
                }
            });
        });
    });
    </script>

    <script>
        $(document).ready(function() {
            $('#quoteRequestForm').on('submit', function(e) {
                e.preventDefault();

                // Show loading state
                Swal.fire({
                    title: 'Submitting...',
                    html: 'Please wait a moment....',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });

                var formData = new FormData(this);

                $.ajax({
                    url: '{% url "home-request_quote" %}',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        if (response.status === 'success') {
                            Swal.fire({
                                icon: 'success',
                                title: 'Request Submitted!',
                                text: response.message,
                                confirmButtonColor: '#c53847',
                                timer: 3000,
                                timerProgressBar: true
                            }).then(() => {
                                // Reset the form and close the modal
                                $('#quoteRequestForm')[0].reset();
                                $('#exampleModalquote').modal('hide');
                            });
                        }
                    },
                    error: function(xhr) {
                        if (xhr.responseJSON && xhr.responseJSON.errors) {
                            var errors = xhr.responseJSON.errors;
                            var errorMessage = Object.values(errors).flat().join('\n');

                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: errorMessage,
                                confirmButtonColor: '#c53847'
                            });
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: 'An error occurred. Please try again.',
                                confirmButtonColor: '#c53847'
                            });
                        }
                    }
                });
            });
        });
    </script>
{% endblock %}


